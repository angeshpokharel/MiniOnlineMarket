{"ast":null,"code":"var _jsxFileName = \"/Users/wineikhaing/Desktop/MIU/WAA/Project/Code/MiniOnlineMarket/mom/src/context/UserContext.js\";\nimport React from \"react\";\nimport { AppUtils } from \"../utils/appUtils\";\nimport { AUTH_TOKEN, LOGIN_FAILURE, LOGIN_SUCCESS, LOGOUT_SUCCESS, USER_ROLE } from \"../utils/constants/index\";\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      return { ...state,\n        isAuthenticated: true,\n        userRole: AppUtils.getUserRole(USER_ROLE)\n      };\n\n    case LOGOUT_SUCCESS:\n    case LOGIN_FAILURE:\n      return { ...state,\n        isAuthenticated: false,\n        userRole: null\n      };\n\n    default:\n      {\n        throw new Error(`Unhandled action type: ${action.type}`);\n      }\n  }\n}\n\nfunction UserProvider({\n  children\n}) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!AppUtils.getAuthToken(AUTH_TOKEN) && !!AppUtils.getUserRole(USER_ROLE),\n    userRole: AppUtils.getUserRole(USER_ROLE)\n  });\n  return React.createElement(UserStateContext.Provider, {\n    value: state,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(UserDispatchContext.Provider, {\n    value: dispatch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, children));\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch };","map":{"version":3,"sources":["/Users/wineikhaing/Desktop/MIU/WAA/Project/Code/MiniOnlineMarket/mom/src/context/UserContext.js"],"names":["React","AppUtils","AUTH_TOKEN","LOGIN_FAILURE","LOGIN_SUCCESS","LOGOUT_SUCCESS","USER_ROLE","UserStateContext","createContext","UserDispatchContext","userReducer","state","action","type","isAuthenticated","userRole","getUserRole","Error","UserProvider","children","dispatch","useReducer","getAuthToken","useUserState","context","useContext","undefined","useUserDispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,UAAT,EAAqBC,aAArB,EAAoCC,aAApC,EAAmDC,cAAnD,EAAmEC,SAAnE,QAAoF,0BAApF;AAEA,IAAIC,gBAAgB,GAAGP,KAAK,CAACQ,aAAN,EAAvB;AACA,IAAIC,mBAAmB,GAAGT,KAAK,CAACQ,aAAN,EAA1B;;AAEA,SAASE,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;AAClC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKT,aAAL;AACE,aAAO,EAAE,GAAGO,KAAL;AAAYG,QAAAA,eAAe,EAAE,IAA7B;AAAmCC,QAAAA,QAAQ,EAAEd,QAAQ,CAACe,WAAT,CAAqBV,SAArB;AAA7C,OAAP;;AACF,SAAKD,cAAL;AACA,SAAKF,aAAL;AACE,aAAO,EAAE,GAAGQ,KAAL;AAAYG,QAAAA,eAAe,EAAE,KAA7B;AAAoCC,QAAAA,QAAQ,EAAE;AAA9C,OAAP;;AAEF;AAAS;AACP,cAAM,IAAIE,KAAJ,CAAW,0BAAyBL,MAAM,CAACC,IAAK,EAAhD,CAAN;AACD;AATH;AAWD;;AAED,SAASK,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAClC,MAAI,CAACR,KAAD,EAAQS,QAAR,IAAoBpB,KAAK,CAACqB,UAAN,CAAiBX,WAAjB,EAA8B;AACpDI,IAAAA,eAAe,EAAE,CAAC,CAACb,QAAQ,CAACqB,YAAT,CAAsBpB,UAAtB,CAAF,IAAuC,CAAC,CAACD,QAAQ,CAACe,WAAT,CAAqBV,SAArB,CADN;AAEpDS,IAAAA,QAAQ,EAAEd,QAAQ,CAACe,WAAT,CAAqBV,SAArB;AAF0C,GAA9B,CAAxB;AAKA,SACE,oBAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAEK,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAES,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,QADH,CADF,CADF;AAOD;;AAED,SAASI,YAAT,GAAwB;AACtB,MAAIC,OAAO,GAAGxB,KAAK,CAACyB,UAAN,CAAiBlB,gBAAjB,CAAd;;AACA,MAAIiB,OAAO,KAAKE,SAAhB,EAA2B;AACzB,UAAM,IAAIT,KAAJ,CAAU,iDAAV,CAAN;AACD;;AACD,SAAOO,OAAP;AACD;;AAED,SAASG,eAAT,GAA2B;AACzB,MAAIH,OAAO,GAAGxB,KAAK,CAACyB,UAAN,CAAiBhB,mBAAjB,CAAd;;AACA,MAAIe,OAAO,KAAKE,SAAhB,EAA2B;AACzB,UAAM,IAAIT,KAAJ,CAAU,oDAAV,CAAN;AACD;;AACD,SAAOO,OAAP;AACD;;AAED,SAASN,YAAT,EAAuBK,YAAvB,EAAqCI,eAArC","sourcesContent":["import React from \"react\";\nimport { AppUtils } from \"../utils/appUtils\";\nimport { AUTH_TOKEN, LOGIN_FAILURE, LOGIN_SUCCESS, LOGOUT_SUCCESS, USER_ROLE } from \"../utils/constants/index\";\n\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      return { ...state, isAuthenticated: true, userRole: AppUtils.getUserRole(USER_ROLE) };\n    case LOGOUT_SUCCESS:\n    case LOGIN_FAILURE:\n      return { ...state, isAuthenticated: false, userRole: null };\n\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nfunction UserProvider({ children }) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!AppUtils.getAuthToken(AUTH_TOKEN) && !!AppUtils.getUserRole(USER_ROLE),\n    userRole: AppUtils.getUserRole(USER_ROLE)\n  });\n\n  return (\n    <UserStateContext.Provider value={state}>\n      <UserDispatchContext.Provider value={dispatch}>\n        {children}\n      </UserDispatchContext.Provider>\n    </UserStateContext.Provider>\n  );\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch };\n"]},"metadata":{},"sourceType":"module"}