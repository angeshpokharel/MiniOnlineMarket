{"ast":null,"code":"var _jsxFileName = \"/Users/angeshpokharel/Desktop/notes/WAA/MiniOnlineMarket/mom/src/components/header/Header.js\";\nimport { AppBar, Avatar, Box, IconButton, Link, Menu, MenuItem, Toolbar, Typography } from \"@material-ui/core\";\nimport { ExitToApp as LogOutIcon, Menu as MenuIcon } from \"@material-ui/icons\";\nimport classNames from \"classnames\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport MOM, { API_URL } from \"../../api/api\";\nimport logo from \"../../assets/img/gop.png\"; // context\n\nimport { toggleSidebar, useLayoutDispatch } from \"../../context/LayoutContext\";\nimport { useUserDispatch } from \"../../context/UserContext\";\nimport { AppUtils } from \"../../utils/appUtils\";\nimport { LOGOUT_SUCCESS } from \"../../utils/constants\";\nimport styles from \"./style\";\nimport AddAlertMessage from \"../alert/Alert\";\nimport { SOMETHING_WENT_WRONG, USER_ID } from \"../../utils/constants/index\";\nimport { LocalStorage } from \"../../utils/storage/localStorage\";\nexport default function Header(props) {\n  const [userFullName, setUserFullName] = useState([]);\n  const classes = styles();\n  let history = useHistory(); // global\n\n  var layoutDispatch = useLayoutDispatch();\n  var userDispatch = useUserDispatch(); // local\n\n  var [profileMenu, setProfileMenu] = useState(null);\n\n  const getUsername = () => {\n    MOM.get(API_URL.user).then(response => {\n      setUserFullName(response.data.fullName);\n      response.data && LocalStorage.setItem(USER_ID, response.data.id);\n    }).catch(error => {\n      AddAlertMessage({\n        type: \"error\",\n        message: SOMETHING_WENT_WRONG\n      });\n    });\n  };\n\n  useEffect(() => {\n    getUsername();\n  }, []);\n\n  const logout = () => {\n    MOM.get(API_URL.logout).then(response => {\n      let data = response.data;\n\n      if (data.type === \"success\") {\n        AppUtils.removeUserRef();\n        userDispatch({\n          type: LOGOUT_SUCCESS\n        });\n        history.push(\"/\");\n      }\n    }).catch(error => {});\n  };\n\n  return React.createElement(AppBar, {\n    position: \"fixed\",\n    className: classes.appBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: logo,\n    alt: \"Mini Online Market\",\n    width: \"36\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(Typography, {\n    variant: \"h6\",\n    className: classes.brand,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Mini Online Market: Role -> \", AppUtils.getUserRole()), React.createElement(Box, {\n    display: \"flex\",\n    className: classes.userProfileMenu,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    onClick: e => setProfileMenu(e.currentTarget),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, userFullName), React.createElement(Avatar, {\n    alt: \"Avatar\",\n    src: logo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  })), React.createElement(Menu, {\n    anchorEl: profileMenu,\n    open: Boolean(profileMenu),\n    onClose: () => setProfileMenu(null),\n    classes: {\n      paper: classes.profileMenu\n    },\n    disableAutoFocusItem: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(MenuItem, {\n    className: classes.profileMenuItem,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Link, {\n    onClick: logout,\n    variant: \"body1\",\n    className: classes.profileMenuLink,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(LogOutIcon, {\n    className: classes.profileMenuIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), \"Logout\")))));\n}","map":{"version":3,"sources":["/Users/angeshpokharel/Desktop/notes/WAA/MiniOnlineMarket/mom/src/components/header/Header.js"],"names":["AppBar","Avatar","Box","IconButton","Link","Menu","MenuItem","Toolbar","Typography","ExitToApp","LogOutIcon","MenuIcon","classNames","React","useEffect","useState","useHistory","MOM","API_URL","logo","toggleSidebar","useLayoutDispatch","useUserDispatch","AppUtils","LOGOUT_SUCCESS","styles","AddAlertMessage","SOMETHING_WENT_WRONG","USER_ID","LocalStorage","Header","props","userFullName","setUserFullName","classes","history","layoutDispatch","userDispatch","profileMenu","setProfileMenu","getUsername","get","user","then","response","data","fullName","setItem","id","catch","error","type","message","logout","removeUserRef","push","appBar","brand","getUserRole","userProfileMenu","e","currentTarget","username","Boolean","paper","profileMenuItem","profileMenuLink","profileMenuIcon"],"mappings":";AAAA,SAAQA,MAAR,EAAgBC,MAAhB,EAAwBC,GAAxB,EAA6BC,UAA7B,EAAyCC,IAAzC,EAA+CC,IAA/C,EAAqDC,QAArD,EAA+DC,OAA/D,EAAwEC,UAAxE,QAAyF,mBAAzF;AACA,SAAQC,SAAS,IAAIC,UAArB,EAAiCL,IAAI,IAAIM,QAAzC,QAAwD,oBAAxD;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,GAAP,IAAaC,OAAb,QAA2B,eAA3B;AACA,OAAOC,IAAP,MAAiB,0BAAjB,C,CACA;;AACA,SAAQC,aAAR,EAAuBC,iBAAvB,QAA+C,6BAA/C;AACA,SAAQC,eAAR,QAA8B,2BAA9B;AACA,SAAQC,QAAR,QAAuB,sBAAvB;AACA,SAAQC,cAAR,QAA6B,uBAA7B;AACA,OAAOC,MAAP,MAAmB,SAAnB;AACA,OAAOC,eAAP,MAA4B,gBAA5B;AACA,SAAQC,oBAAR,EAA8BC,OAA9B,QAA4C,6BAA5C;AACA,SAAQC,YAAR,QAA2B,kCAA3B;AAEA,eAAe,SAASC,MAAT,CAAgBC,KAAhB,EAAuB;AACpC,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkClB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAMmB,OAAO,GAAGT,MAAM,EAAtB;AACA,MAAIU,OAAO,GAAGnB,UAAU,EAAxB,CAHoC,CAKpC;;AACA,MAAIoB,cAAc,GAAGf,iBAAiB,EAAtC;AACA,MAAIgB,YAAY,GAAGf,eAAe,EAAlC,CAPoC,CASpC;;AACA,MAAI,CAACgB,WAAD,EAAcC,cAAd,IAAgCxB,QAAQ,CAAC,IAAD,CAA5C;;AAEA,QAAMyB,WAAW,GAAG,MAAM;AACxBvB,IAAAA,GAAG,CAACwB,GAAJ,CAAQvB,OAAO,CAACwB,IAAhB,EACGC,IADH,CACQC,QAAQ,IAAI;AAChBX,MAAAA,eAAe,CAACW,QAAQ,CAACC,IAAT,CAAcC,QAAf,CAAf;AACAF,MAAAA,QAAQ,CAACC,IAAT,IAAiBhB,YAAY,CAACkB,OAAb,CAAqBnB,OAArB,EAA8BgB,QAAQ,CAACC,IAAT,CAAcG,EAA5C,CAAjB;AACD,KAJH,EAIKC,KAJL,CAIWC,KAAK,IAAI;AAChBxB,MAAAA,eAAe,CAAC;AAAEyB,QAAAA,IAAI,EAAE,OAAR;AAAiBC,QAAAA,OAAO,EAAEzB;AAA1B,OAAD,CAAf;AACD,KANH;AAOD,GARD;;AAUAb,EAAAA,SAAS,CAAC,MAAM;AACd0B,IAAAA,WAAW;AACZ,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMa,MAAM,GAAG,MAAM;AACnBpC,IAAAA,GAAG,CAACwB,GAAJ,CAAQvB,OAAO,CAACmC,MAAhB,EACGV,IADH,CACQC,QAAQ,IAAI;AAChB,UAAIC,IAAI,GAAGD,QAAQ,CAACC,IAApB;;AACA,UAAIA,IAAI,CAACM,IAAL,KAAc,SAAlB,EAA6B;AAC3B5B,QAAAA,QAAQ,CAAC+B,aAAT;AACAjB,QAAAA,YAAY,CAAC;AAAEc,UAAAA,IAAI,EAAE3B;AAAR,SAAD,CAAZ;AACAW,QAAAA,OAAO,CAACoB,IAAR,CAAa,GAAb;AACD;AACF,KARH,EASGN,KATH,CASSC,KAAK,IAAI,CACf,CAVH;AAWD,GAZD;;AAcA,SACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,OAAjB;AAAyB,IAAA,SAAS,EAAEhB,OAAO,CAACsB,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAErC,IAAV;AAAgB,IAAA,GAAG,EAAC,oBAApB;AAAyC,IAAA,KAAK,EAAC,IAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,SAAS,EAAEe,OAAO,CAACuB,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAC+BlC,QAAQ,CAACmC,WAAT,EAD/B,CAFF,EAKE,oBAAC,GAAD;AAAK,IAAA,OAAO,EAAC,MAAb;AAAoB,IAAA,SAAS,EAAExB,OAAO,CAACyB,eAAvC;AAAwD,IAAA,cAAc,EAAC,QAAvE;AAAgF,IAAA,UAAU,EAAC,QAA3F;AAAoG,IAAA,OAAO,EAAEC,CAAC,IAAIrB,cAAc,CAACqB,CAAC,CAACC,aAAH,CAAhI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,SAAS,EAAE3B,OAAO,CAAC4B,QAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG9B,YADH,CADF,EAIE,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAC,QAAZ;AAAqB,IAAA,GAAG,EAAEb,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CALF,EAWE,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEmB,WAAhB;AAA6B,IAAA,IAAI,EAAEyB,OAAO,CAACzB,WAAD,CAA1C;AAAyD,IAAA,OAAO,EAAE,MAAMC,cAAc,CAAC,IAAD,CAAtF;AAA8F,IAAA,OAAO,EAAE;AAAEyB,MAAAA,KAAK,EAAE9B,OAAO,CAACI;AAAjB,KAAvG;AAAuI,IAAA,oBAAoB,MAA3J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAEJ,OAAO,CAAC+B,eAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,OAAO,EAAEZ,MAAf;AAAuB,IAAA,OAAO,EAAC,OAA/B;AAAuC,IAAA,SAAS,EAAEnB,OAAO,CAACgC,eAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEhC,OAAO,CAACiC,eAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,WADF,CADF,CAXF,CADF,CADF;AAwBD","sourcesContent":["import {AppBar, Avatar, Box, IconButton, Link, Menu, MenuItem, Toolbar, Typography} from \"@material-ui/core\";\nimport {ExitToApp as LogOutIcon, Menu as MenuIcon} from \"@material-ui/icons\";\nimport classNames from \"classnames\";\nimport React, {useEffect, useState} from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport MOM, {API_URL} from \"../../api/api\";\nimport logo from \"../../assets/img/gop.png\";\n// context\nimport {toggleSidebar, useLayoutDispatch} from \"../../context/LayoutContext\";\nimport {useUserDispatch} from \"../../context/UserContext\";\nimport {AppUtils} from \"../../utils/appUtils\";\nimport {LOGOUT_SUCCESS} from \"../../utils/constants\";\nimport styles from \"./style\";\nimport AddAlertMessage from \"../alert/Alert\";\nimport {SOMETHING_WENT_WRONG, USER_ID} from \"../../utils/constants/index\";\nimport {LocalStorage} from \"../../utils/storage/localStorage\";\n\nexport default function Header(props) {\n  const [userFullName, setUserFullName] = useState([]);\n  const classes = styles();\n  let history = useHistory();\n\n  // global\n  var layoutDispatch = useLayoutDispatch();\n  var userDispatch = useUserDispatch();\n\n  // local\n  var [profileMenu, setProfileMenu] = useState(null);\n\n  const getUsername = () => {\n    MOM.get(API_URL.user)\n      .then(response => {\n        setUserFullName(response.data.fullName);\n        response.data && LocalStorage.setItem(USER_ID, response.data.id);\n      }).catch(error => {\n        AddAlertMessage({ type: \"error\", message: SOMETHING_WENT_WRONG });\n      })\n  }\n\n  useEffect(() => {\n    getUsername();\n  }, []);\n\n  const logout = () => {\n    MOM.get(API_URL.logout)\n      .then(response => {\n        let data = response.data;\n        if (data.type === \"success\") {\n          AppUtils.removeUserRef();\n          userDispatch({ type: LOGOUT_SUCCESS });\n          history.push(\"/\");\n        }\n      })\n      .catch(error => {\n      });\n  };\n\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar>\n        <img src={logo} alt=\"Mini Online Market\" width=\"36\"></img>\n        <Typography variant=\"h6\" className={classes.brand}>\n          Mini Online Market: Role -> {AppUtils.getUserRole()}\n        </Typography>\n        <Box display=\"flex\" className={classes.userProfileMenu} justifyContent=\"center\" alignItems=\"center\" onClick={e => setProfileMenu(e.currentTarget)}>\n          <Typography variant=\"body1\" className={classes.username}>\n            {userFullName}\n          </Typography>\n          <Avatar alt=\"Avatar\" src={logo} />\n        </Box>\n        <Menu anchorEl={profileMenu} open={Boolean(profileMenu)} onClose={() => setProfileMenu(null)} classes={{ paper: classes.profileMenu }} disableAutoFocusItem>\n          <MenuItem className={classes.profileMenuItem}>\n            <Link onClick={logout} variant=\"body1\" className={classes.profileMenuLink}>\n              <LogOutIcon className={classes.profileMenuIcon} />\n              Logout\n            </Link>\n          </MenuItem>\n        </Menu>\n      </Toolbar>\n    </AppBar>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}